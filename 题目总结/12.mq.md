## mq

##### 怎样保证mq数据不丢失？

- ack确认机制，发给交换机时确认，队列发给客户端确认
- 开启mq持久化机制，保证mq重启后消息不会丢失
- 重试机制，多次尝试失败后交给错误交换机进行处理



##### Mq重复消费问题

1.每条消息设置一个唯一的标识id
2.加分布式锁来控制



##### 延迟队列和死信队列:
1.设置超时时间的队列，当时间到了之后就会变成死信队列，由绑定的死信队列进行消费
2.延迟队列的一个插件，需要额外在mq下面安装